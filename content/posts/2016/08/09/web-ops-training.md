---
title: Webオペレーション研修、そして夏季休暇
date: 2016-08-09 23:45:52
categories:
  - 技術
tags:
---

ついにやってきた。8/10〜8/17まで。
前半はほとんど予定がないので、飲んだりなんだり募集してます。

大学生は休み長いし、なんならいつも休みみたいなもんだったけど、これが社会人かという気持ちになっている。
特にいまは有給休暇がないので、貴重な休み…。

## インフラをつくる

エンジニア研修はWeb開発研修からWebオペレーション研修へと移り、[Rails Tutorial](https://www.railstutorial.org/book)で作ったRailsアプリを動かすインフラをひたすら作っている。

- 開発環境はDocker
  - いまのところはDockerらしい使い方というよりは軽量VMとして使っている
- Puppetで構成管理し、Serverspecでテストを書く
- アプリケーションはCapistranoでデプロイできるようにする
- 基本的なサーバ構成は、
  - リバースプロキシ(Nginx)
  - アプリケーションサーバ(Unicorn)
  - データベース(MySQL)
  - SSH踏み台サーバ(本番環境を考慮し、グローバルIPをもつのはここだけで、他のサーバには踏み台を経由した多段SSHでログインする)

まずはすべてが同居した全部入りサーバを作り、次にロールごとにホストを分割していく。ここまでできたら社内のプライベートクラウドNyahを使い、本番環境としての動作を確認する。

ここからはさらに、DBレプリケーション、Appサーバ複数台化やロードバランサ導入など冗長構成にしたり、Mackerelなど監視機構やCDNの導入など、リアルな本番環境で使っているような構成に近づけていく。
現状はロールごとのホスト分割がもうすぐ終わるという段階。

知らないことだらけで新卒エンジニアみんなで苦しみながら、楽しみながらやっております。
今書いてて思ったけど、まだまだ先は険しい…本当に終わるのだろうか……。

よくない実装なのはわかってはいるけど、力不足でなかなかうまくできないのがなんとも歯がゆい。
時間の制約から積み残しになっているところもあるので、休みを使って色々勉強していきたいです。
